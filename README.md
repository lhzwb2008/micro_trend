# BTC 日内对称趋势策略

本项目实现了适用于加密货币（BTC）的对称日内趋势跟踪策略，可以同时进行多头和空头交易。

## 📊 策略概述

### Dual Thrust（双向突破策略）⭐ 推荐

**最佳表现策略**，基于前N日的价格波动范围设定上下轨，价格突破上轨做多，跌破下轨做空。

**核心优势：**
- ✅ 多空对称：多空交易次数接近1:1
- ✅ 信号清晰：基于前日波动范围的突破
- ✅ 参数简单：只有k1、k2两个核心系数
- ✅ 5年回测：年化收益25.47%，总回报277.69%

**回测表现（2020-2025）：**
- 年化收益率：+25.47%
- 夏普比率：0.533
- 最大回撤：-52.64%
- 总回报：+277.69%
- 多头交易：1137笔 | 空头交易：1080笔
- 胜率：46.3%

### R-Breaker（反转突破策略）

基于前一日价格计算6个关键价位，结合趋势突破和反转信号进行交易。

**特点：**
- 信号复杂，包含趋势突破和反转两种模式
- 交易频率较高
- 适合震荡市场

### 菲阿里四价（四价突破策略）

基于前一日的开盘价、最高价、最低价、收盘价计算关键价位。

**特点：**
- 简单直观
- 交易频率适中
- 适合趋势明显的市场

## 🚀 使用方法

### 1. 安装依赖

```bash
pip install pandas numpy
```

### 2. 下载BTC数据

```bash
python3 download_btc_data.py
```

这会下载近5年的BTC 15分钟K线数据到 `btc_15m.csv`

### 3. 运行策略回测

```bash
python3 symmetric_intraday_strategies.py
```

### 4. 修改策略配置

编辑 `symmetric_intraday_strategies.py` 文件中的 `CONFIG` 部分：

```python
CONFIG = {
    # 策略选择（1=Dual Thrust, 2=R-Breaker, 3=菲阿里四价）
    'strategy': 1,
    
    # Dual Thrust 参数
    'dual_thrust': {
        'lookback_days': 1,      # 回看天数
        'k1': 0.5,               # 上轨系数（越大越宽松）
        'k2': 0.5,               # 下轨系数（越大越宽松）
        'stop_loss_pct': 0.03,   # 止损百分比（3%）
        'use_time_exit': True,   # 是否使用时间退出
        'exit_hour': 23,         # 退出小时（UTC时间）
        'exit_minute': 45,       # 退出分钟
    },
}
```

## 📈 策略原理

### Dual Thrust 策略逻辑

1. **计算前N日的价格指标：**
   - HH = 前N日最高价的最高值
   - LL = 前N日最低价的最低值
   - HC = 前N日收盘价的最高值
   - LC = 前N日收盘价的最低值

2. **计算波动范围：**
   ```
   Range = max(HH - LC, HC - LL)
   ```

3. **计算上下轨：**
   ```
   BuyLine = DayOpen + k1 * Range   （突破上轨做多）
   SellLine = DayOpen - k2 * Range  （跌破下轨做空）
   ```

4. **交易信号：**
   - 价格突破 BuyLine → 开多仓
   - 价格跌破 SellLine → 开空仓
   - 反向信号或止损 → 平仓

5. **风险控制：**
   - 固定止损：默认3%
   - 时间退出：每日23:45强制平仓
   - 反向信号平仓

## 📁 文件说明

- `symmetric_intraday_strategies.py` - 对称日内策略实现（主文件）
- `download_btc_data.py` - BTC数据下载工具
- `btc_15m.csv` - 15分钟K线数据（需下载）
- `btc_1d.csv` - 日线数据（需下载）

## ⚠️ 风险提示

1. **回撤风险：** 最大回撤可能超过50%，需要充足的风险承受能力
2. **市场环境：** 策略在趋势市场表现更好，震荡市可能频繁止损
3. **滑点和手续费：** 实盘交易需要考虑滑点和交易手续费
4. **资金管理：** 建议不要满仓交易，保留足够的安全边际
5. **回测非未来：** 历史表现不代表未来收益

## 🎯 策略优化建议

1. **降低回撤：**
   - 减小仓位（如只用50%资金）
   - 收紧止损（如从3%降到2%）
   - 增加趋势过滤（如200日均线）

2. **提高收益：**
   - 增加杠杆（风险也增加）
   - 优化参数k1/k2
   - 结合其他技术指标

3. **改善稳定性：**
   - 分散到多个交易对
   - 使用组合策略
   - 动态调整仓位

## 📊 为什么选择对称策略？

1. **适应牛熊市：** 可以在上涨和下跌中都获利
2. **避免方向性偏见：** 不依赖市场方向判断
3. **风险更均衡：** 多空平衡，不会只在单边市场中受损
4. **更适合BTC：** BTC波动大、24小时交易，适合双向捕捉机会

## 📝 更新日志

- 2025-11-10: 完成对称日内策略实现和回测
- 2025-11-10: Dual Thrust策略表现最佳，年化收益25.47%

## 📧 联系方式

如有问题或建议，欢迎提Issue。

---

**免责声明：** 本项目仅供学习和研究使用，不构成任何投资建议。加密货币交易风险极高，请谨慎投资。

